package main

import (
	"bytes"
	"log"
	"time"

	tb "gopkg.in/tucnak/telebot.v2"
)

var smallPngBytes = []byte{
	0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, 0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,
	0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x1D, 0x08, 0x02, 0x00, 0x00, 0x00, 0xAB, 0x3E, 0x92,
	0xEE, 0x00, 0x00, 0x00, 0x01, 0x73, 0x52, 0x47, 0x42, 0x00, 0xAE, 0xCE, 0x1C, 0xE9, 0x00, 0x00,
	0x00, 0x04, 0x67, 0x41, 0x4D, 0x41, 0x00, 0x00, 0xB1, 0x8F, 0x0B, 0xFC, 0x61, 0x05, 0x00, 0x00,
	0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0E, 0xC3, 0x00, 0x00, 0x0E, 0xC3, 0x01, 0xC7,
	0x6F, 0xA8, 0x64, 0x00, 0x00, 0x00, 0x2C, 0x49, 0x44, 0x41, 0x54, 0x48, 0x4B, 0xED, 0xCD, 0x31,
	0x01, 0x00, 0x30, 0x0C, 0x04, 0xA1, 0xFA, 0x37, 0xFD, 0xB5, 0xC0, 0x92, 0xED, 0x30, 0xC0, 0xDB,
	0xBD, 0x0E, 0xD7, 0xE1, 0x3A, 0x5C, 0x87, 0xEB, 0x70, 0x1D, 0xAE, 0xC3, 0x75, 0xB8, 0x0E, 0x77,
	0x7F, 0x6C, 0x1F, 0xC1, 0x15, 0x2C, 0x6F, 0x2D, 0xF7, 0xB3, 0xF1, 0x00, 0x00, 0x00, 0x00, 0x49,
	0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82,
}

func commandExample(token string) {
	b, err := tb.NewBot(tb.Settings{
		Token:       token,
		Poller:      &tb.LongPoller{Timeout: 10 * time.Second},
		Synchronous: true,
	})
	if err != nil {
		log.Fatal(err)
	}

	chatID := tb.ChatID(254793840)

	// Send text
	b.Send(chatID, "Hello")

	// Send photo
	b.Send(chatID, &tb.Photo{
		File: tb.FromReader(bytes.NewReader(smallPngBytes)),
	})

	// Send photo with caption
	b.Send(chatID, &tb.Photo{
		File:    tb.FromReader(bytes.NewReader(smallPngBytes)),
		Caption: "This is a small .png",
	})

	// Send album with caption (Caption of the first item is a caption of the whole album)
	b.SendAlbum(chatID, []tb.InputMedia{
		&tb.Photo{File: tb.FromReader(bytes.NewReader(smallPngBytes)), Caption: "1"},
		&tb.Photo{File: tb.FromReader(bytes.NewReader(smallPngBytes))},
		&tb.Photo{File: tb.FromReader(bytes.NewReader(smallPngBytes))},
	})
}
